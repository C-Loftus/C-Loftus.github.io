<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Linux Hands-Free Accessibility | Colton Loftus</title>
<meta name="keywords" content="linux, software, accessibility, programming">
<meta name="description" content="While completing my thesis research on computer accessibility and ML models for speech recognition, I became quite familiar with the landscape of hands-free accessibility software and the related tooling on Linux. In this post I hope to show some of my opinions and provide advice to others who might be looking to control their computer via dictation. Many of these software choices and setup decisions are platform agnostic, but I am primarily focused on Linux.">
<meta name="author" content="">
<link rel="canonical" href="/writings/linux-accessibility/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3365a20d8043877ba3e47a2f71366502063f731af18488c208238123126df598.css" integrity="sha256-M2WiDYBDh3uj5HovcTZlAgY/cxrxhIjCCCOBIxJt9Zg=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="mask-icon" href="safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Linux Hands-Free Accessibility" />
<meta property="og:description" content="While completing my thesis research on computer accessibility and ML models for speech recognition, I became quite familiar with the landscape of hands-free accessibility software and the related tooling on Linux. In this post I hope to show some of my opinions and provide advice to others who might be looking to control their computer via dictation. Many of these software choices and setup decisions are platform agnostic, but I am primarily focused on Linux." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/writings/linux-accessibility/" /><meta property="article:section" content="writings" />
<meta property="article:published_time" content="2022-06-01T19:06:34-04:00" />
<meta property="article:modified_time" content="2022-06-01T19:06:34-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux Hands-Free Accessibility"/>
<meta name="twitter:description" content="While completing my thesis research on computer accessibility and ML models for speech recognition, I became quite familiar with the landscape of hands-free accessibility software and the related tooling on Linux. In this post I hope to show some of my opinions and provide advice to others who might be looking to control their computer via dictation. Many of these software choices and setup decisions are platform agnostic, but I am primarily focused on Linux."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Writings",
      "item": "/writings/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Linux Hands-Free Accessibility",
      "item": "/writings/linux-accessibility/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Linux Hands-Free Accessibility",
  "name": "Linux Hands-Free Accessibility",
  "description": "While completing my thesis research on computer accessibility and ML models for speech recognition, I became quite familiar with the landscape of hands-free accessibility software and the related tooling on Linux. In this post I hope to show some of my opinions and provide advice to others who might be looking to control their computer via dictation. Many of these software choices and setup decisions are platform agnostic, but I am primarily focused on Linux.",
  "keywords": [
    "linux", "software", "accessibility", "programming"
  ],
  "articleBody": "While completing my thesis research on computer accessibility and ML models for speech recognition, I became quite familiar with the landscape of hands-free accessibility software and the related tooling on Linux. In this post I hope to show some of my opinions and provide advice to others who might be looking to control their computer via dictation. Many of these software choices and setup decisions are platform agnostic, but I am primarily focused on Linux.\nGeneral Principles Generally speaking, with accessibility software your fundamental goal should be to perform as much work with as little interactive friction as possible. This applies to not only the hands, but any other input method like voice control, eye trackers, foot pedals, or other forms of alternative input. If you use any input method in excess it is not a question of if you are going to develop a repetitive strain injury, but rather when. All the software I list below follows these goals. Namely, not to just try and replicate keyboard behavior with the voice, but rather to try and optimize it at a more fundamental level and reduce the amount of input in general.\nSoftware I Recommend Talon Voice Without a doubt the most important tool you can use is Talon Voice. It provides an offline voice parser, a simple scripting language, and a Python API for your own programming. With these tools you can essentially use voice to control any action on the desktop that could be done through the keyboard or API calls.\nCursorless By far the best to tool to edit code and also general text is Cursorless. This extension allows you to select any word in a text file and perform operations on it through Talon voice commands. To do Cursorless justice is beyond the scope of this article, yet it can be roughly thought of as improving voice coding in a way that is analogous to how specialty editors like Vim help keyboard driven coding. Namely, by using combinations of commands and chaining them together for quicker editing. Cursorless does this by adding colored ‘hats’ on top of each token and manipulating them via a specialty grammar.\nVSCode Since Cursorless is currently exclusive to VSCode, VSCode is the clear winner for accessible text editors. Beyond this, VSCode is well documented and provides a significant amount of commands and keyboard shortcuts that can be called from Talon. While others have experimented with Emacs configurations, I would not recommend this due to the lack of extension support from Cursorless. There is of course also a much higher barrier to entry.\nDistributions Within the general Linux community, innovative or minimalist distributions are often in vogue (nix, guix, artix, void etc.). Yet for most users, these differences rarely make a large difference compared to more popular options. Once you get enough experience on Linux, the most important difference for the desktop user is typically just packaging and software support. As a result, I have to say that Fedora or Ubuntu are the best choices if you are concerned about accessibility. I believe a central goal with accessibility is to have as little friction as possible and have a maximally stable system. This reduces any chance that your accessibility software will fail and you will be forced to find a solution yourself. Configuring files through the terminal tends to be rather cumbersome through voice and alternative distributions like NixOS don’t work out of the box with Talon. Even if some of these problems are moreso just annoyances and can be easily fixed, the general principle persists: stick with what works, even if its not flashy.\nPop Tiling Shell For my desktop environment, I personally use Pop Tiling Shell on Ubuntu Gnome. This extension allows me to have dynamic window tiling and better keyboard shortcuts for the window manager, while still using a full featured desktop environment like Gnome. This extension does have some bugs since it is building upon the Gnome shell which isn’t really intended for this sort of behavior. That being said, I prefer being in a full desktop environment since there is generally more functionality built in.\nIf you are looking for a more lightweight option, I would recommend awesomewm. It is a stand alone tiling window manager, but it is easier to customize than DWM, has sensible defaults out of the box, and still has dynamic tiling unlike i3.\nRango Rango is an extension similar to Vimium that allows you to navigate web pages through voice commands. It is built upon talon for its voice parsing. Rango allows you to greatly speed up your web navigation by giving every link a small two letter tag above it. This allows you to simply say the name of the tag instead of needing to use your mouse or click using an eye tracker.\nCurrent Problems and The Future While all these software choices can greatly improve your workflow there are still a few shortcomings on Linux. First, GUI applications still tend to be very mouse driven and cumbersome to use with voice. This is especially the case for creative applications like DAWs, video editing, or artistic software. Voice is simply not a great input method for these sorts of activities with how they are currently designed. From what I have seen, Mac applications tend to do better on this front. For instance, the Mac GUI keyboard navigation program Vimac seems to be a tool that could be particularly useful if an alternative was developed on Linux.\nNext, Linux does not generally have good interoperability with mobile devices. If you have an iPhone, it requires much more effort to sync your devices and transition between mobile and desktop. iPhones provide no easy way to send SMS from a non-Mac desktop. Disconnects in the software ecosystems of desktop and mobile can be a significant issue for accessibility as more computing shifts to mobile devices, yet the best accessibility software remains on desktop.\nHopefully this problem can be mitigated as we move towards a future of Linux mobile devices. Linux mobile devices allow the user to have a similar workflow and tools on both mobile and the desktop. While there is much work to do on this front, I am hopeful that one day the same accessibility tools on the desktop will have convenient interoperability with those on mobile.\nFor more discussion on this topic, check out my thesis research where I discuss Linux mobile devices, federated learning and more new trends in voice-based accessibility.    initComments({ node: document.getElementById(\"comment-section\"), defaultHomeserverUrl: \"https://matrix.cactus.chat:8448\", serverName: \"cactus.chat\", siteName: \"\", commentSectionId: \"linux-accessibility\" }) \n",
  "wordCount" : "1094",
  "inLanguage": "en",
  "datePublished": "2022-06-01T19:06:34-04:00",
  "dateModified": "2022-06-01T19:06:34-04:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/writings/linux-accessibility/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Colton Loftus",
    "logo": {
      "@type": "ImageObject",
      "url": "favicon.ico"
    }
  }
}
</script>
</head>

<div class= "header-bar"> </div>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="" accesskey="h" title="Colton Loftus (Alt + H)">Colton Loftus</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="services/" title="Services">
                    <span>Services</span>
                </a>
            </li>
            <li>
                <a href="contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="writings" title="Writing">
                    <span>Writing</span>
                </a>
            </li>
            <li>
                <a href="search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Linux Hands-Free Accessibility
    </h1>
    <div class="post-meta"><span title='2022-06-01 19:06:34 -0400 EDT'>June 1, 2022</span>&nbsp;·&nbsp;6 min

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#general-principles" aria-label="General Principles">General Principles</a></li>
                <li>
                    <a href="#software-i-recommend" aria-label="Software I Recommend">Software I Recommend</a><ul>
                        
                <li>
                    <a href="#talon-voice" aria-label="Talon Voice">Talon Voice</a></li>
                <li>
                    <a href="#cursorless" aria-label="Cursorless">Cursorless</a></li>
                <li>
                    <a href="#vscode" aria-label="VSCode">VSCode</a></li>
                <li>
                    <a href="#distributions" aria-label="Distributions">Distributions</a></li>
                <li>
                    <a href="#pop-tiling-shell" aria-label="Pop Tiling Shell">Pop Tiling Shell</a></li>
                <li>
                    <a href="#rango" aria-label="Rango">Rango</a></li></ul>
                </li>
                <li>
                    <a href="#current-problems-and-the-future" aria-label="Current Problems and The Future">Current Problems and The Future</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>While completing my <a href="https://github.com/c-loftus/princeton-Thesis">thesis research</a> on computer accessibility and ML models for speech recognition, I became quite familiar with the landscape of hands-free accessibility software and the related tooling on Linux. In this post I hope to show some of my opinions and provide advice to others who might be looking to control their computer via dictation. Many of these software choices and setup decisions are platform agnostic, but I am primarily focused on Linux.</p>
<h2 id="general-principles">General Principles<a hidden class="anchor" aria-hidden="true" href="#general-principles">#</a></h2>
<p>Generally speaking, with accessibility software your fundamental goal should be to perform as much work with as little interactive friction as possible. This applies to not only the hands, but any other input method like voice control, eye trackers, foot pedals, or other forms of alternative input. If you use any input method in excess it is not a question of if you are going to develop a repetitive strain injury, but rather when. All the software I list below follows these goals. Namely, not to just try and replicate keyboard behavior with the voice, but rather to try and optimize it at a more fundamental level and reduce the amount of input in general.</p>
<h2 id="software-i-recommend">Software I Recommend<a hidden class="anchor" aria-hidden="true" href="#software-i-recommend">#</a></h2>
<h3 id="talon-voice">Talon Voice<a hidden class="anchor" aria-hidden="true" href="#talon-voice">#</a></h3>
<p>Without a doubt the most important tool you can use is <a href="https://talonvoice.com/">Talon Voice</a>. It provides an offline voice parser, a simple scripting language, and a Python API for your own programming. With these tools you can essentially use voice to control any action on the desktop that could be done through the keyboard or API calls.</p>
<h3 id="cursorless">Cursorless<a hidden class="anchor" aria-hidden="true" href="#cursorless">#</a></h3>
<p>By far the best to tool to edit code and also general text is <a href="https://github.com/cursorless-dev/cursorless">Cursorless</a>. This extension allows you to select any word in a text file and perform operations on it through Talon voice commands. To do Cursorless justice is beyond the scope of this article, yet it can be roughly thought of as improving voice coding in a way that is analogous to how specialty editors like Vim help keyboard driven coding. Namely, by using combinations of commands and chaining them together for quicker editing. Cursorless does this by adding colored &lsquo;hats&rsquo; on top of each token and manipulating them via a specialty grammar.</p>
<p><img loading="lazy" src="https://www.cursorless.org/docs/assets/images/tryWrapFine-9655118ff42de230357781ce5691079c.gif" alt=""  />
</p>
<h3 id="vscode">VSCode<a hidden class="anchor" aria-hidden="true" href="#vscode">#</a></h3>
<p>Since Cursorless is currently exclusive to VSCode, VSCode is the clear winner for accessible text editors. Beyond this, VSCode is well documented and provides a significant amount of commands and keyboard shortcuts that can be called from Talon. While others have experimented with Emacs configurations, I would not recommend this due to the lack of extension support from Cursorless. There is of course also a much higher barrier to entry.</p>
<h3 id="distributions">Distributions<a hidden class="anchor" aria-hidden="true" href="#distributions">#</a></h3>
<p>Within the general Linux community, innovative or minimalist distributions are often in vogue (nix, guix, artix, void etc.). Yet for most users, these differences rarely make a large difference compared to more popular options. Once you get enough experience on Linux, the most important difference for the desktop user is typically just packaging and software support. As a result, I have to say that Fedora or Ubuntu are the best choices if you are concerned about accessibility. I believe a central goal with accessibility is to have as little friction as possible and have a maximally stable system. This reduces any chance that your accessibility software will fail and you will be forced to find a solution yourself. Configuring files through the terminal tends to be rather cumbersome through voice and alternative distributions like NixOS don&rsquo;t work out of the box with Talon. Even if some of these problems are moreso just annoyances and can be easily fixed, the general principle persists: stick with what works, even if its not flashy.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h3 id="pop-tiling-shell">Pop Tiling Shell<a hidden class="anchor" aria-hidden="true" href="#pop-tiling-shell">#</a></h3>
<p>For my desktop environment, I personally use Pop Tiling Shell on Ubuntu Gnome. This extension allows me to have dynamic window tiling and better keyboard shortcuts for the window manager, while still using a full featured desktop environment like Gnome. This extension does have some bugs since it is building upon the Gnome shell which isn&rsquo;t really intended for this sort of behavior. That being said, I prefer being in a full desktop environment since there is generally more functionality built in.</p>
<p>If you are looking for a more lightweight option, I would recommend awesomewm. It is a stand alone tiling window manager, but it is easier to customize than DWM, has sensible defaults out of the box, and still has dynamic tiling unlike i3.</p>
<h3 id="rango">Rango<a hidden class="anchor" aria-hidden="true" href="#rango">#</a></h3>
<p><a href="https://github.com/david-tejada/rango">Rango</a> is an extension similar to Vimium that allows you to navigate web pages through voice commands. It is built upon talon for its voice parsing. Rango allows you to greatly speed up your web navigation by giving every link a small two letter tag above it. This allows you to simply say the name of the tag instead of needing to use your mouse or click using an eye tracker.</p>
<h2 id="current-problems-and-the-future">Current Problems and The Future<a hidden class="anchor" aria-hidden="true" href="#current-problems-and-the-future">#</a></h2>
<p>While all these software choices can greatly improve your workflow there are still a few shortcomings on Linux. First, GUI applications still tend to be very mouse driven and cumbersome to use with voice. This is especially the case for creative applications like DAWs, video editing, or artistic software. Voice is simply not a great input method for these sorts of activities with how they are currently designed. From what I have seen, Mac applications tend to do better on this front. For instance, the Mac GUI keyboard navigation program Vimac seems to be a tool that could be particularly useful if an alternative was developed on Linux.</p>
<p>Next, Linux does not generally have good interoperability with mobile devices. If you have an iPhone, it requires much more effort to sync your devices and transition between mobile and desktop. iPhones provide no easy way to send SMS from a non-Mac desktop.  Disconnects in the software ecosystems of desktop and mobile can be a significant issue for accessibility as more computing shifts to mobile devices, yet the best accessibility software remains on desktop.</p>
<p>Hopefully this problem can be mitigated as we move towards a future of Linux mobile devices. Linux mobile devices allow the user to have a similar workflow and tools on both mobile and the desktop. While there is much work to do on this front, I am hopeful that one day the same accessibility tools on the desktop will have convenient interoperability with those on mobile.</p>
<p>For more discussion on this topic, check out my <a href="https://github.com/c-loftus/princeton-Thesis">thesis research</a> where I discuss Linux mobile devices, federated learning and more new trends in voice-based accessibility.
<script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
<link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
<div id="comment-section"></div>
<script>
initComments({
  node: document.getElementById("comment-section"),
  defaultHomeserverUrl: "https://matrix.cactus.chat:8448",
  serverName: "cactus.chat",
  siteName: "<YOUR-SITE-NAME>",
  commentSectionId: "linux-accessibility"
})
</script></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/linux/">linux</a></li>
      <li><a href="/tags/software/">software</a></li>
      <li><a href="/tags/accessibility/">accessibility</a></li>
      <li><a href="/tags/programming/">programming</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="">Colton Loftus</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
